function init() {
	tinyMCEPopup.resizeToInnerSize();
}


  	_eng_=new Array(
  		96,	49,	50,	51,	52,	53,	54,	55,	56,	57,	48,	45,	61,	92,	113,	119,	101,	114,	116,	121,	117,	105,	111,	112,	91,	93,	97,	115,	100,	102,	103,	104,	106,	107,	108,	59,	39,	122,	120,	99,	118,	98,	110,	109,	44,	46,	47,	126,	33,	64,	35,	36,	37,	94,	38,	42,	40,	41,	95,	43,	124,	81,	87,	69,	82,	84,	89,	85,	73,	79,	80,	123,	125,	65,	83,	68,	70,	71,	72,	74,	75,	76,	58,	34,	90,	88,	67,	86,	66,	78,	77,	60,	62,	63,	
  		''
  	);
  
  	_standart_=new Array(
  		96,	49,	50,	51,	52,	53,	54,	55,	56,	57,	48,	45,	61,	92,	216,	223,	196,	210,	212,	218,	214,	201,	207,	208,	91,	93,	192,	211,	195,	215,	194,	228,	227,	202,	203,	59,	39,	198,	225,	221,	197,	193,	205,	204,	44,	46,	47,	126,	33,	64,	35,	36,	37,	94,	38,	42,	40,	41,	95,	43,	124,	81,	224,	69,	217,	200,	89,	85,	73,	79,	80,	123,	125,	65,	219,	68,	70,	71,	72,	209,	75,	76,	58,	34,	222,	88,	220,	86,	66,	78,	77,	60,	62,	63,	
  		''
  	);
  
  	_utf8_=new Array(
  		96,	49,	50,	51,	52,	53,	54,	55,	56,	57,	48,	45,	61,	92,	4325,	4332,	4308,	4320,	4322,	4327,	4323,	4312,	4317,	4318,	91,	93,	4304,	4321,	4307,	4324,	4306,	4336,	4335,	4313,	4314,	59,	39,	4310,	4334,	4330,	4309,	4305,	4316,	4315,	44,	46,	47,	126,	33,	64,	35,	36,	37,	94,	38,	42,	40,	41,	95,	43,	124,	81,	4333,	69,	4326,	4311,	89,	85,	73,	79,	80,	123,	125,	65,	4328,	68,	70,	71,	72,	4319,	75,	76,	58,	34,	4331,	88,	4329,	86,	66,	78,	77,	60,	62,	63,	
  		''
  	);
  
  
  	Manuchari=new Array(
  		8222,	33,	63,	8470,	167,	37,	58,	46,	59,	44,	47,	8211,	61,	4326,	4335,	4323,	4313,	4308,	4316,	4306,	4328,	4332,	4310,	4334,	4330,	40,	4324,	4331,	4309,	4311,	4304,	4318,	4320,	4317,	4314,	4307,	4319,	4333,	4329,	4327,	4321,	4315,	4312,	4322,	4325,	4305,	4336,	8220,	49,	50,	51,	52,	53,	54,	55,	56,	57,	48,	45,	43,	4326,	4335,	4323,	4313,	4308,	4316,	4306,	4328,	4332,	4310,	4334,	4330,	41,	4324,	4331,	4309,	4311,	4304,	4318,	4320,	4317,	4314,	4307,	4319,	4333,	4329,	4327,	4321,	4315,	4312,	4322,	4325,	4305,	4336,	
  		''
  	);
  
  	racxa=new Array(
  		8216,	49,	50,	51,	52,	53,	54,	55,	56,	57,	48,	45,	61,	216,	223,	196,	210,	212,	218,	214,	201,	207,	208,	91,	93,	192,	211,	195,	215,	194,	228,	227,	202,	203,	59,	96,	92,	198,	225,	221,	197,	193,	205,	204,	44,	46,	47,	126,	33,	64,	35,	36,	37,	94,	38,	42,	40,	41,	95,	43,	32,	224,	32,	217,	200,	199,	206,	213,	226,	229,	123,	125,	32,	219,	32,	32,	32,	32,	209,	32,	32,	58,	8220,	124,	222,	32,	220,	91,	93,	167,	185,	60,	62,	63,	
  		''
  	);
  
  	GeoFinder=new Array(
  		96,	49,	50,	51,	52,	53,	54,	55,	56,	57,	48,	45,	61,	92,	82,	99,	117,	107,	101,	110,	103,	83,	119,	122,	120,	104,	102,	84,	118,	97,	112,	114,	111,	108,	100,	74,	121,	87,	67,	115,	109,	105,	116,	113,	98,	90,	106,	37,	33,	63,	34,	59,	58,	44,	46,	42,	40,	41,	95,	43,	124,	81,	87,	69,	82,	84,	89,	85,	73,	79,	80,	91,	93,	65,	83,	68,	70,	71,	72,	74,	75,	76,	59,	39,	90,	88,	67,	86,	66,	78,	77,	44,	46,	47,	
  		''
  	);
  
  
	ganlageba=new Array('','ganlageba_eng','ganlageba_rus');
	
	ganlageba_1_2=new Array(0,1,2,3,4,5,6,7,8,9,10,11,12,13,43,22,18,31,42,45,16,41,32,30,24,25,29,39,34,26,20,0,25,17,33,35,36,23,24,15,28,44,19,40,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93);
	ganlageba_2_1=new Array(0,31,1,2,3,4,5,6,7,8,9,10,11,12,13,39,20,33,16,42,30,21,15,37,38,32,29,27,40,26,23,17,22,34,28,35,36,37,38,27,43,21,18,14,41,19,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93);
   var mmm=new Array(); 

   met=new Array("_eng_","_standart_","_utf8_","Manuchari","racxa","GeoFinder","");
//------------------------------
   function is(chcode,mas) {
      for (j=0; j<mas.length; j++) {if (mas[j]==chcode) {return (j);}}
      return (-1);
   }
//------------------------------

function makeConvertion(sourse,from,to) {
  from=met[from.selectedIndex];
  to=met[to.selectedIndex];
  st=eval(sourse).value; st1="";
  from_charset=eval(from);
  to_charset=eval(to);
  
  var extramas=new Array();
  
  for(i=0; i<st.length; i++) {
     ch=st.charAt(i);
     if (extramas[ch]){
        st1+=extramas[ch];
     } 
     else{
        chc=ch.charCodeAt(0);
        chi=is(chc,from_charset); 
        if(chi!=-1){
		   newchar=String.fromCharCode(to_charset[chi]);
           st1+=newchar;
		   extramas[ch]=newchar;
        } 
        else{
           st1+=ch;
           extramas[ch]=ch;
        }
     }
  }
  return st1;
}



function doConvert() {
    var form = document.forms[0];
    var text = makeConvertion(form.sourse,form.charset1,form.charset2);
	
	tinyMCEPopup.execCommand('mcePasteText', false, {html:text, linebreaks:true});
		
    document.forms[0].sourse.value="";

	// Refocus in window
	if (tinyMCEPopup.isWindow)
		window.focus();

	//tinyMCEPopup.close();
}